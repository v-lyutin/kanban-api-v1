# kanban-api-v1
Как системы контроля версий помогают команде работать с общим кодом, так и трекеры задач позволяют эффективно организовать совместную работу над задачами. В этом проекте реализовано API для такого трекера.

***[!] API написано без использования сторонних фреймворков на чистой Java.***

### Типы и свойства задач
Простейшим кирпичиком такой системы является задача. У задачи есть следующие свойства:

1. Название, кратко описывающее суть задачи (например, «Переезд»);
2. Описание, в котором раскрываются детали;
3. Уникальный идентификационный номер задачи, по которому её можно будет найти;
4. Статус, отображающий её прогресс:
    - `NEW` - задача только создана, но к её выполнению ещё не приступили
    - `IN_PROGRESS` - над задачей ведётся работа
    - `DONE` - задача выполнена
5. Стартовое время - дата, когда предполагается приступить к выполнению задачи;
6. Продолжительность - продолжительность задачи, оценка того, сколько времени она займёт в минутах.

В системе задачи могут быть трёх типов: обычные задачи, эпики и подзадачи. Для них выполняются следующие условия:
- Для каждой подзадачи известно, в рамках какого эпика она выполняется;
- Каждый эпик знает, какие подзадачи в него входят;
- Завершение всех подзадач эпика считается завершением эпика.

### Хранение задач и запуск трекера
В трекере предусмотрено два режима, которые нужно выбрать при запуске трекера: 
- `FileBackedTasksManager` - задачи сохраняются в CSV-файл, и при перезапуске менеджер восстанавливает данные из него;
- `HttpTaskManager` - задачи сохраняются в HashMap, и при перезапуске данные стираются.

Класс `ManagersService` предоставляет два метода по этим режимам: `getDefault(HistoryManager historyManager)` и `getHttpManager(HistoryManager historyManager)`.

В менеджеры внедряется `HistoryManager` для записи истории по задачам. Для этого в `ManagersService` предоставлен метод `getDefaultHistory()`.

При использовании `HttpTaskManager` нужно запустить `KVServer` и `HttpTaskServer`.

### API
Трекер имеет следующие эндпоинты:
- `GET/tasks/` - получение приоритета по задачам
- `GET/tasks/history/` - получение истории по задачам 
- `GET/tasks/task/` - получение всех обычных задач
- `GET/tasks/subtask/` - получение всех подзадач
- `GET/tasks/epic/` - получение всех составных задач 
- `GET/tasks/task/?id={id}` - получение обычной задачи по ID
- `GET/tasks/subtask/?id={id}` - получение подзадачи по ID
- `GET/tasks/epic/?id={id}` - получение составной задачи по ID
- `GET/tasks/subtask/epic/?id={id}` - получение всех подзадач составной задачи 
- `POST/tasks/task/` - добавление обычной задачи 
- `POST/tasks/subtask/` - добавление подзадачи 
- `POST/tasks/epic/` - добавление составной задачи 
- `PUT/tasks/task/?id={id}` - обновление обычной задачи по ID
- `PUT/tasks/subtask/?id={id}` - обновление подзадачи по ID
- `PUT/tasks/epic/?id={id}` - обновление составной задачи по ID
- `DELETE/tasks/task/` - удаление всех обычных задач
- `DELETE/tasks/subtask/` - удаление всех подзадач
- `DELETE/tasks/task/?id={id}` - удалениие обычной задачи по ID
- `DELETE/tasks/subtask/?id={id}` - удаление подзадачи по ID
- `DELETE/tasks/subtask/epic/?id={id}` - удаление составной задачи по ID

Пример тела запроса для добаления обычной задачи:
```JSON
{
    "title": "Task",
    "description": "Task description",
    "startTime": "2024-01-01, 10:00",
    "duration": 100
}
```
Пример тела запроса для добаления составной задачи:
```JSON
{
    "title": "Epic",
    "description": "Epic description",
    "startTime": "2024-01-01, 10:00",
    "duration": 100
}
```
Пример тела запроса для добаления подзадачи:
```JSON
{
   "title": "Subtask",
   "description": "Subtask description",
   "startTime": "2024-01-01, 10:00",
   "duration": 100,
   "epicId": "{epicId}"
}
```